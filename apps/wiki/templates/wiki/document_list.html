{% extends "base.html" %}
{% load compressed %}

{% block extrahead %}
{% compressed_css 'listing' %}
{% endblock extrahead %}

{% block extrabody %}
{% compressed_js 'listing' %}
<script type="text/javascript" charset="utf-8">
$(function() {
	function search(event) {
        event.preventDefault();
        
        var expr = new RegExp(slugify($('#file-list-filter').val()), 'i');
    	
        $('#file-list p').hide().filter(function(index) {
            console.log(expr.test($(this).attr('title')))
            return expr.test(slugify($('a', this).html()));
        }).show();
    }
	
    $('#file-list-find-button').click(search).hide();
	$('#file-list-filter').bind('keyup change DOMAttrModified', search);
});
</script>
{% endblock %}

{% block maincontent %}
<h1><img src="{{STATIC_URL}}/img/logo.png">Platforma Redakcyjna</h1>

<div class="document-list">
    <form action="#" method="GET">
    <p>Filtr: <input autocomplete="off" name="filter" id="file-list-filter" type="text" size="60" />
        <input type="submit" value="Znajdź" id="file-list-find-button"/>
        <input type="reset" value="Wyczyść" id="file-list-reset-button"/>
    </p>
    </form>
	 
    <div id="file-list">
    {% for file in document_list %}
        <p><a href="{% url wiki.views.document_detail file|urlencode %}">{{ file }}</a></p>
    {% endfor %}
    </div>
</div>

</div>
{% endblock maincontent %}
